# Postgres Data Modelling

## Project Summary

This project creates an ETL pipeline for a startup called Sparkify. Sparkify wants to analyze the data they've been collecting on songs and user 
activity on their new music streaming app. This project includes creating a database schema and the ETL pipeline transfers data from files in two
local directories into these tables in Postgres using Python and SQL.


## Files in repository

**create_tables.py** : Python script to create database and the tables.   
**sql_queries.py**   : Python script that contains SQL statements for creating tables and Inserting records into tables.  
**etl.py**           : Python script that extracts data , transforms and loads into Postgres. 


## Project Datasets

### Song Dataset

The first dataset is a subset of real data from the Million Song Dataset. Each file is in JSON format and contains metadata about a song and the 
artist of that song.

### Log Dataset

The second dataset consists of log files in JSON format generated by this event simulator based on the songs in the dataset above. These simulate activity logs from a music streaming app based on specified configurations.
The log files in the dataset are partitioned by year and month. 


## Schema for Song Play Analysis

### Fact Table

**songplays** - records in log data associated with song plays i.e. records with page NextSong   
*songplay_id, start_time, user_id, level, song_id, artist_id, session_id, location, user_agent*

### Dimension Tables

**users** - users in the app  
*user_id, first_name, last_name, gender, level*

**songs** - songs in music database  
*song_id, title, artist_id, year, duration*

**artists** - artists in music database  
*artist_id, name, location, latitude, longitude*

**time** - timestamps of records in songplays broken down into specific units  
*start_time, hour, day, week, month, year, weekday*


## How to run

Run the scripts in the order as below

> python create_tables.py   
> python etl.py

